# 表情包管理工具技术架构文档

## 1. 项目概述

### 1.1 项目目标
开发一个跨平台的表情包管理工具，让用户能够方便地管理、搜索和使用表情包。

### 1.2 核心功能
- 跨平台运行支持
- 表情包链接导入功能
- 表情包关键词管理
- 模糊搜索功能
- 跨应用拖拽使用

## 2. 技术选型

### 2.1 核心框架
- **PyQt/PySide**: 跨平台桌面应用GUI框架
- **FastAPI**: 后端服务框架
- **Python**: 开发语言
- **SQLite**: 本地数据存储（通过SQLAlchemy操作）

### 2.2 主要依赖
- **PyInstaller**: 应用打包工具
- **SQLAlchemy**: ORM数据库工具
- **requests**: 网络请求处理
- **Pillow**: 图像处理库
- **python-magic**: 文件类型验证

## 3. 系统架构

### 3.1 整体架构
- **GUI层**: 基于PyQt/PySide实现的用户界面
- **服务层**: FastAPI实现的后端服务
- **数据层**: SQLAlchemy封装的数据库操作
- **业务逻辑层**: 核心功能实现模块

### 3.2 数据模型

#### 表情包(Meme)
```
{
  id: string,
  path: string,        // 本地存储路径
  source: string,      // 来源链接
  type: string,        // 图片类型（静态/动图）
  createTime: Date,
  updateTime: Date
}
```

#### 关键词(Keyword)
```
{
  id: string,
  word: string,
  createTime: Date
}
```

#### 关键词映射(MemeKeywordMap)
```
{
  memeId: string,
  keywordId: string
}
```

### 3.3 核心模块

#### 表情包管理模块
- 表情包导入（支持链接和本地文件）
- 表情包存储（统一管理本地文件）
- 表情包预览

#### 关键词管理模块
- 关键词添加/删除
- 关键词与表情包多对多映射
- 批量关键词操作

#### 搜索模块
- 关键词模糊匹配
- 搜索结果排序
- 搜索历史记录

#### 拖拽使用模块
- 跨应用拖拽支持
- 剪贴板集成
- 拖拽预览

## 4. 用户界面

### 4.1 主界面
- 表情包网格展示区
- 搜索输入框
- 导入功能按钮
- 设置入口

### 4.2 表情包管理界面
- 表情包详情展示
- 关键词编辑区
- 预览功能

### 4.3 设置界面
- 存储路径设置
- 界面主题设置
- 快捷键设置